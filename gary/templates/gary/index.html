{% extends 'base.html' %} {% load static %} 
{% block styles%}
<link href="{% static 'jquery-ui-1.12.1/jquery-ui.min.css' %}" rel="stylesheet">
<style>
    table {
        table-layout: fixed;
        word-break: break-all;
        word-wrap: break-word;
        border: 3px black solid
    }

    th {
        border: 2px white solid;
        word-wrap: break-word;
    }

    td {
        border: 2px white solid;
        word-wrap: break-word;

    }

    img {
        width: 100%;
    }
    
    /* .active{
        opacity: .4;
    } */
</style>
{% endblock %}
{% block content %}
<div class="container">
    <div class="row">
        <div class="col-12 col-md-3">
            {% for recipe in recipes %}
                <div class="card draggable" style="border: 3px solid black;">
                    <a href="{% url 'recipe:showrecipe' recipe.recid %}">
                    <img class="card-img-top" src="/media/{{recipe.reccover}}" alt="Card image cap" data-toggle="modal" data-target="#exampleModal">
                    </a>
                    <div class="card-body">
                        <h4 class="card-title" style="font-weight: 900">[食譜]{{recipe.recname}}</h4>
                        <p class="card-text">{{recipe.recdesc}}</p>
                    </div>
                    <ul class="list-group list-group-flush">
                        <li class="list-group-item">葷素: {{recipe.recvegan}}</li>
                        <li class="list-group-item">熱量: {{recipe.reccal}}</li>
                    </ul>
                </div>
            {% endfor %}
        </div>
        <div class="col-12 col-md-3">
            {% for storemenu in storemenu %}
                <div class="card draggable" style="border: 3px solid black;">
                    <img class="card-img-top" id="imgall" src="/media/{{storemenu.cimg}}" alt="Card image cap" data-toggle="modal" data-target="#exampleModal">
                    <div class="card-body">
                        <h4 class="card-title" style="font-weight: 900">[店家]{{storemenu.cname}}</h4>
                        <p class="card-text">{{storemenu.cintroduction}}</p>
                    </div>
                    <ul class="list-group list-group-flush">
                        <li class="list-group-item">類型: {{storemenu.ctype}}</li>
                        <li class="list-group-item">熱量: {{storemenu.ccal}}</li>
                        <li class="list-group-item">價錢: {{storemenu.cprice}}</li>
                    </ul>
                </div>
            {% endfor %}
        </div>
        <div class="col-12 col-md-6">
            <form method="post">
                {% csrf_token %}
            <table class="table" style="background-color: #f9ebc0;color:black;text-align: center">
                <thead style="background-color: #1eb4ab;color:white">
                    <tr>
                        <th>BREAKFAST</th>>
                        <th>LUNCH</th>>
                        <th>DINNER</th>>
                    </tr>
                </thead>
                <tbody id="monday" name="monday">
                    <tr>
                        <th colspan="3">Monday&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        <small>熱量:0大卡</small></th>
                    </tr>
                    <tr>
                        <td style="padding: 0" class="dropzone">
                            <img src="{% static 'images/empty.png' %}">
                            <input type="hidden" value="" name="1-1">
                        </td>
                        <td style="padding: 0" class="dropzone">
                            <img src="{% static 'images/empty.png' %}">
                            <input type="hidden" value="" name="1-2">
                        </td>
                        <td style="padding: 0" class="dropzone">
                            <img src="{% static 'images/empty.png' %}">
                            <input type="hidden" value="" name="1-3">
                        </td>
                    </tr>
                </tbody>
                <tbody id="tuesday" name="tuesday">
                    <tr>
                        <th colspan="3">Tuesday&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        <small>熱量:0大卡</small></th>
                    </tr>
                    <tr>
                        <td style="padding: 0" class="dropzone">
                            <img src="{% static 'images/empty.png' %}">
                            <input type="hidden" value="" name="2-1">
                        </td>
                        <td style="padding: 0" class="dropzone">
                            <img src="{% static 'images/empty.png' %}">
                            <input type="hidden" value="" name="2-2">
                        </td>
                        <td style="padding: 0" class="dropzone">
                            <img src="{% static 'images/empty.png' %}">
                            <input type="hidden" value="" name="2-3">
                        </td>
                    </tr>
                </tbody>
                <tbody id="wednesday" name="wednesday">
                    <tr>
                        <th colspan="3">Wednesday&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        <small>熱量:0大卡</small></th>
                    </tr>
                    <tr>
                        <td style="padding: 0" class="dropzone">
                            <img src="{% static 'images/empty.png' %}">
                            <input type="hidden" value="" name="3-1">
                        </td>
                        <td style="padding: 0" class="dropzone">
                            <img src="{% static 'images/empty.png' %}">
                            <input type="hidden" value="" name="3-2">
                        </td>
                        <td style="padding: 0" class="dropzone">
                            <img src="{% static 'images/empty.png' %}">
                            <input type="hidden" value="" name="3-3">
                        </td>
                    </tr>
                </tbody>
                <tbody id="thursday" name="thursday">
                    <tr>
                        <th colspan="3">Thursday&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        <small>熱量:0大卡</small></th>
                    </tr>
                    <tr>
                        <td style="padding: 0" class="dropzone">
                            <img src="{% static 'images/empty.png' %}">
                            <input type="hidden" value="" name="4-1">
                        </td>
                        <td style="padding: 0" class="dropzone">
                            <img src="{% static 'images/empty.png' %}">
                            <input type="hidden" value="" name="4-2">
                        </td>
                        <td style="padding: 0" class="dropzone">
                            <img src="{% static 'images/empty.png' %}">
                            <input type="hidden" value="" name="4-3">
                        </td>
                    </tr>
                </tbody>
                <tbody id="friday" name="friday">
                    <tr>
                        <th colspan="3">Friday&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        <small>熱量:0大卡</small></th>
                    </tr>
                    <tr>
                        <td style="padding: 0" class="dropzone">
                            <img src="{% static 'images/empty.png' %}">
                            <input type="hidden" value="" name="5-1">
                        </td>
                        <td style="padding: 0" class="dropzone">
                            <img src="{% static 'images/empty.png' %}">
                            <input type="hidden" value="" name="5-2">
                        </td>
                        <td style="padding: 0" class="dropzone">
                            <img src="{% static 'images/empty.png' %}">
                            <input type="hidden" value="" name="5-3">
                        </td>
                    </tr>
                </tbody>
                <tbody id="saturday" name="saturday">
                    <tr>
                        <th colspan="3">Saturday&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        <small>熱量:0大卡</small></th>
                    </tr>
                    <tr>
                        <td style="padding: 0" class="dropzone">
                            <img src="{% static 'images/empty.png' %}">
                            <input type="hidden" value="" name="6-1">
                        </td>
                        <td style="padding: 0" class="dropzone">
                            <img src="{% static 'images/empty.png' %}">
                            <input type="hidden" value="" name="6-2">
                        </td>
                        <td style="padding: 0" class="dropzone">
                            <img src="{% static 'images/empty.png' %}">
                            <input type="hidden" value="" name="6-3">
                        </td>
                    </tr>
                </tbody>
                <tbody id="sunday" name="sunday">
                    <tr>
                        <th colspan="3">Sunday&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        <small>熱量:0大卡</small></th>
                    </tr>
                    <tr>
                        <td style="padding: 0" class="dropzone">
                            <img src="{% static 'images/empty.png' %}">
                            <input type="hidden" value="" name="7-1">
                        </td>
                        <td style="padding: 0" class="dropzone">
                            <img src="{% static 'images/empty.png' %}">
                            <input type="hidden" value="" name="7-2">
                        </td>
                        <td style="padding: 0" class="dropzone">
                            <img src="{% static 'images/empty.png' %}">
                            <input type="hidden" value="" name="7-3">
                        </td>
                    </tr>
                </tbody>
                <tbody>
                    <tr>
                        <th colspan="3">標題 &nbsp;:&nbsp;&nbsp;<input type="text" class="btn btu-primary" name="title" ></th>
                    </tr>
                    <tr>
                        <th colspan="3"><input id="btn1" type="submit" class="btn btu-primary" value="儲存"></th>
                    </tr>
                </tbody>
            </table>
            </form>

        </div>

    </div>
</div>

{% endblock %}
{% block scripts %}
<script src="{% static 'jquery-ui-1.12.1/jquery-ui.min.js' %}"></script>
<script>
    var a = 300;
    $(".draggable").draggable({
        // brings the item back to its place when dragging is over
		revert:true, 
        
        // let the dragged item always on the top
        stack: ".draggable"
        
        
    });   
    
    $(".dropzone").droppable({
        drop: function(event, ui) {
            
            var basket = $(this);
			var move = ui.draggable;
            
            addBasket(basket,move)
        }   
    });


    function addBasket(basket, move) {
        //餐點名字 move.find(".card-title").html()
        //餐點照片 move.find("img").attr("src")
        title = move.find(".card-title").text()
        image_src = move.find("img").attr("src")
        // basket.html(move.find(".card-title").html() + 
        // "<img src='"  + move.find("img").attr("src") + "'>" );
        basket.find('input').attr('value',title)
        basket.find('img').attr('src',image_src)
    }  
</script>
{% endblock %}